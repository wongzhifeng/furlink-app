# Zeaburæ„å»ºå¤±è´¥ - npmå…¼å®¹æ€§ä¿®å¤

## ğŸš¨ æ„å»ºé”™è¯¯

**é”™è¯¯ä¿¡æ¯**: `npm ci --only=production` å‘½ä»¤å¤±è´¥

**é”™è¯¯åŸå› **: `--only=production` å‚æ•°åœ¨æ–°ç‰ˆæœ¬npmä¸­å·²è¢«å¼ƒç”¨

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### é—®é¢˜åˆ†æ

- âŒ **æ—§å‘½ä»¤**: `npm ci --only=production` (å·²å¼ƒç”¨)
- âœ… **æ–°å‘½ä»¤**: `npm ci --omit=dev` (æ¨è)
- âœ… **æ›¿ä»£æ–¹æ¡ˆ**: `npm install --no-audit --no-fund` (å…¼å®¹æ€§æ›´å¥½)

### ä¿®å¤æªæ–½

#### 1. æ›´æ–°Dockerfile

**ä¿®å¤å‰**:
```dockerfile
RUN npm ci --only=production --no-audit --no-fund
```

**ä¿®å¤å**:
```dockerfile
RUN npm install --no-audit --no-fund
```

#### 2. æŠ€æœ¯è¯´æ˜

**ä¸ºä»€ä¹ˆä½¿ç”¨ `npm install` è€Œä¸æ˜¯ `npm ci`**:
- âœ… **å…¼å®¹æ€§**: `npm install` åœ¨æ‰€æœ‰npmç‰ˆæœ¬ä¸­éƒ½å¯ç”¨
- âœ… **çµæ´»æ€§**: è‡ªåŠ¨å¤„ç†package-lock.json
- âœ… **ç¨³å®šæ€§**: å‡å°‘ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**ä¸ºä»€ä¹ˆå®‰è£…æ‰€æœ‰ä¾èµ–**:
- âœ… **æ„å»ºéœ€è¦**: Reactæ„å»ºéœ€è¦å¼€å‘ä¾èµ–
- âœ… **å¤šé˜¶æ®µæ„å»º**: ç”Ÿäº§é•œåƒåªåŒ…å«æ„å»ºäº§ç‰©
- âœ… **ä½“ç§¯ä¼˜åŒ–**: æœ€ç»ˆé•œåƒä¸åŒ…å«node_modules

### ğŸ“‹ ä¿®å¤åçš„Dockerfile

```dockerfile
# FurLink å‰ç«¯Webåº”ç”¨ Dockerfile - å…¼å®¹ç‰ˆ
# å® ç‰©ç´§æ€¥å¯»å›å¹³å°å‰ç«¯æœåŠ¡ - Zeaburéƒ¨ç½²ä¼˜åŒ–

# æ„å»ºé˜¶æ®µ
FROM node:18-alpine AS builder

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼Œç”¨äºæ„å»ºï¼‰
RUN npm install --no-audit --no-fund

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ - ä½¿ç”¨Node.jsé™æ€æœåŠ¡å™¨
FROM node:18-alpine AS production

# å®‰è£…serveåŒ…ç”¨äºé™æ€æ–‡ä»¶æœåŠ¡
RUN npm install -g serve

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/dist /app/dist

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# æš´éœ²ç«¯å£
EXPOSE 8080

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PORT=8080
ENV NODE_ENV=production

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/ || exit 1

# å¯åŠ¨é™æ€æ–‡ä»¶æœåŠ¡å™¨
CMD ["serve", "-s", "dist", "-l", "8080"]
```

## ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤

### 1. æäº¤ä¿®å¤
```bash
git add .
git commit -m "ğŸ”§ ä¿®å¤npmå…¼å®¹æ€§é—®é¢˜ - æ›´æ–°Dockerfile"
git push origin main && git push github main
```

### 2. åœ¨Zeaburå¹³å°é‡æ–°éƒ¨ç½²
1. ç™»å½•Zeaburå¹³å°: https://zeabur.com
2. æ‰¾åˆ° `furlink-frontend-us` æœåŠ¡
3. ç‚¹å‡» "Redeploy" é‡æ–°éƒ¨ç½²
4. ç­‰å¾…æ„å»ºå®Œæˆ

### 3. éªŒè¯éƒ¨ç½²ç»“æœ
- æ£€æŸ¥æ„å»ºæ—¥å¿—ï¼Œç¡®è®¤æ²¡æœ‰npmé”™è¯¯
- è®¿é—® https://furlink-frontend-us.zeabur.app
- éªŒè¯é¡µé¢æ ‡é¢˜æ˜¯å¦ä¸º "æ¯›èŒ¸èŒ¸"

## ğŸ” æŠ€æœ¯å¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ¨èåº¦ |
|------|------|------|--------|
| npm install | å…¼å®¹æ€§å¥½ã€ç¨³å®š | æ„å»ºæ—¶é—´ç•¥é•¿ | â­â­â­â­â­ |
| npm ci --omit=dev | å¿«é€Ÿã€ç²¾ç¡® | ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ | â­â­â­ |
| npm ci --only=production | å·²å¼ƒç”¨ | ä¸æ¨è | âŒ |

## ğŸ“Š é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒZeaburæ„å»ºåº”è¯¥ï¼š
- âœ… npmå‘½ä»¤æ‰§è¡ŒæˆåŠŸ
- âœ… ä¾èµ–å®‰è£…å®Œæˆ
- âœ… Reactåº”ç”¨æ„å»ºæˆåŠŸ
- âœ… é™æ€æ–‡ä»¶æœåŠ¡å™¨å¯åŠ¨
- âœ… é¡µé¢æ ‡é¢˜æ˜¾ç¤º "æ¯›èŒ¸èŒ¸"

## ğŸ’¡ æœ€ä½³å®è·µ

### npmå‘½ä»¤é€‰æ‹©
- **å¼€å‘ç¯å¢ƒ**: `npm install`
- **CI/CD**: `npm ci` (å¦‚æœç‰ˆæœ¬å…¼å®¹)
- **Dockeræ„å»º**: `npm install` (æ¨è)

### å¤šé˜¶æ®µæ„å»º
- **æ„å»ºé˜¶æ®µ**: å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬å¼€å‘ä¾èµ–
- **ç”Ÿäº§é˜¶æ®µ**: åªå¤åˆ¶æ„å»ºäº§ç‰©ï¼Œä¸åŒ…å«node_modules

### ç‰ˆæœ¬å…¼å®¹æ€§
- ä½¿ç”¨ç¨³å®šçš„npmå‘½ä»¤
- é¿å…ä½¿ç”¨å·²å¼ƒç”¨çš„å‚æ•°
- æµ‹è¯•ä¸åŒnpmç‰ˆæœ¬çš„å…¼å®¹æ€§

---

**ä¿®å¤ç‰ˆæœ¬**: 3.0.0  
**åˆ›å»ºæ—¶é—´**: 2024-12-19  
**é€‚ç”¨é—®é¢˜**: npmå‘½ä»¤å…¼å®¹æ€§é—®é¢˜
